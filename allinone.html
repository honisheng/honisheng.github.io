<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æˆ‘å€‘çš„å©šç¦®é‚€è«‹</title>
  <!-- Open Graphï¼šæ–¹ä¾¿åˆ†äº«æ™‚é¡¯ç¤ºé è¦½ -->
  <meta property="og:title" content="æˆ‘å€‘çš„å©šç¦®é‚€è«‹ â€“ å¼µæ˜è–ï¼†é»ƒæƒ å¦‚" />
  <meta property="og:description" content="é‚€è«‹æ‚¨è¦‹è­‰æˆ‘å€‘çš„å¹¸ç¦æ™‚åˆ»" />
  <meta property="og:image" content="images/share-img.png" />
  <style>
    /* èƒŒæ™¯èˆ‡æ·¡å…¥è¨­å®š */
    body {
      background-image: url('images/lin-palace-bg.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      opacity: 0;
      animation: fadeIn 2s ease-in-out forwards;
      position: relative;
      z-index: 0;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(255,255,255,0.7);
      z-index: -1;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }

    /* Intro overlay */
    #intro-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeOut 2s ease 3s forwards;
    }
    .intro-text {
      font-size: 2.5em;
      font-weight: bold;
      color: #d88c9a;
    }
    @keyframes fadeOut {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }

    /* ä¿¡å°å‹•ç•« */
    .intro { display: flex; justify-content: center; align-items: center; height: 100vh; background: #ffeaea; transition: opacity 1s ease; }
    .envelope { position: relative; width: 90vw; max-width:600px;height: auto; aspect-ratio: 6/5 ; background: #d9534f; border-radius:5px; overflow:hidden; cursor:pointer; box-shadow:0 8px 15px rgba(0,0,0,0.2); }
    .flap { position:absolute; top:0; left:0; width:100%; height:50%; background:#c9302c; transform-origin: top center; transition: transform 1s ease; z-index:2; }
    .letter { position:absolute; top:100%; left:0; width:100%; height:100%; background:#fff; padding:20px; box-sizing:border-box; transition:top 1s ease; z-index:1; font-size:14px; }
    .envelope.open .flap { transform: rotateX(-180deg); }
    .envelope.open .letter { top:0; }

    /* ä¸»å…§å®¹å®¹å™¨ */
    #main { display:none; opacity:0; }

    /* ä¸»å€å¡Š */
    .t1 { display:grid; grid-template-areas:"A B C"; grid-template-columns:1fr 3fr 1fr; gap:10px; }
    .section { margin-bottom:30px; padding-left:20px; }
    .title { color:#8B0000; font-weight:bold; font-size:1.2em; }
    .content { margin-top:5px; }
    .note { color:#D2691E; font-size:0.95em; margin-top:10px; }

    /* æ„›å¿ƒé£„è½æ•ˆæœ */
    #hearts { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999; }
    .heart { position:absolute; width:20px; height:20px; background:url('images/red-heart.svg') no-repeat center; background-size:contain; animation: fall 5s linear infinite; }
    @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity:0; } }

    /* è¡¨å–®èˆ‡æŒ‰éˆ• */
    .toggle-button { background-color:#6666cc; color:white; padding:12px 16px; border:none; border-radius:8px; cursor:pointer; display:block; margin:30px auto 10px; font-size:18px; }
    .toggle-content { display:none; background:#fff; padding:20px; margin:0 auto 40px; width:90%; max-width:600px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    form label, form select, form input, form textarea, form button { display:block; width:100%; margin-bottom:15px; font-size:16px; }
    form button { background-color:#d81b60; color:white; padding:10px; border:none; border-radius:6px; cursor:pointer; }
    form button:hover { background-color:#c2185b; }

    /* æ¨™é¡Œèˆ‡åœ°åœ–å®¹å™¨ */
    header, section, footer { padding:20px; max-width:800px; margin:auto; text-align:center; }
    .map-container { position:relative; width:100%; height:400px; border-radius:8px; overflow:hidden; margin-top:10px; }

  </style>
</head>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<body>

  <!-- Intro overlay -->
  <div id="intro-overlay"><div class="intro-text">æˆ‘å€‘çµå©šå•¦</div></div>

  <!-- ä¿¡å°å€ -->
  <div class="intro" id="intro">
    <div class="envelope" id="envelope">
      <div class="flap">
        <h1 style="text-align:center;color:white;margin-top:20px;font-size:80px;">å›</h1>
        <h1 style="text-align:center;color:white;">å¼µæ˜è–&é»ƒæƒ å¦‚</h1>
        <p style="font-family:'Great Vibes',cursive;font-size:60px;color:white;text-align:right;margin-right:30px;">I â¤ You</p>
      </div>
      <div class="letter">
        <h2>å©šå®´é‚€è«‹å‡½</h2><br><h1>æˆ‘å€‘èª æ‘¯åœ°é‚€è«‹æ‚¨åƒåŠ æˆ‘å€‘çš„å©šç¦®</h1><h1>ä¸€èµ·è¦‹è­‰é€™ç¾å¥½çš„æ™‚åˆ»ã€‚</h1>
      </div>
    </div>
  </div>

  <!-- ä¸»å…§å®¹ -->
  <div id="main">
    <header><h1>å¼µæ˜è–&é»ƒæƒ å¦‚èª æ‘¯åœ°é‚€è«‹æ‚¨åƒåŠ </h1></header>

    <!-- BGM -->
    <audio id="bgm" src="music/wedding-music.mp3" loop></audio>

    <!-- æ„›å¿ƒç‰¹æ•ˆ -->
    <div id="hearts"></div>

    <!-- è³‡è¨Šå€ -->
    <div class="t1">
      <div class="A"></div>
      <div class="B">
        <div class="section"><div class="title">æ—¥æœŸ Date</div><div class="content">2023/11/01 (å…­) æ™šå®´</div></div>
        <div class="section"><div class="title">æ™‚é–“ Time</div><div class="content">16:30 æˆ¶å¤–è­‰å©š â†’ 17:00 è¿è³“é…’æœƒ â†’ 17:30 æ•¬é‚€å…¥å¸­ â†’ 18:00 æº–æ™‚é–‹å¸­</div></div>
        <div class="section"><div class="title">åœ°é» Location</div><div class="content">å°ä¸­æ—çš‡å®®å®®å»·é¤¨ 1F ç™½çç å»³ï¼ˆå°ä¸­å¸‚è¥¿å±¯å€è‡ºç£å¤§é“ä¸‰æ®µ33è™Ÿï¼‰</div></div>

        <!-- å›å‡½è¡¨å–® -->
        <section>
          <button class="toggle-button" onclick="toggleSection('rsvp-content')">ğŸ“© å©šå®´å›å‡½</button>
          <div id="rsvp-content" class="toggle-content">
            <form id="rsvp-form">
              <label for="name">æ‚¨çš„å§“åï¼š</label><input type="text" id="name" name="name" required />
              <label>æ‚¨èˆ‡æ–°äººçš„é—œä¿‚</label>
              <select name="relation"><option value="">è«‹é¸æ“‡</option><option value="A">ç”·æ–¹è¦ªæˆš</option><option value="B">å¥³æ–¹è¦ªæˆš</option><option value="C">ç”·æ–¹æœ‹å‹</option><option value="D">å¥³æ–¹æœ‹å‹</option><option value="E">ç”·æ–¹åŒäº‹</option><option value="F">å¥³æ–¹åŒäº‹</option></select>
              <label>æ‚¨æœƒä¾†åƒèˆ‡æˆ‘å€‘çš„å©šå®´å—ï¼Ÿ</label>
              <select name="attendance" id="attendance" required><option value="">è«‹é¸æ“‡</option><option value="yes">éå¸¸æ¨‚æ„</option><option value="no">ç„¡æ³•åƒåŠ </option></select>
              <div id="guest-count-group" style="display:none;">
                <label for="guest-count">å‡ºå¸­äººæ•¸ï¼š</label>
                <select id="guest-count" name="guest-count"><option value="">è«‹é¸æ“‡äººæ•¸</option></select>
              </div>
              <label>éœ€è¦ç‚ºæ‚¨æº–å‚™ç´ é£Ÿå—ï¼Ÿ</label>
              <select name="vegetarian" id="vegetarian" required><option value="">è«‹é¸æ“‡</option><option value="yes">æ˜¯çš„ï¼Œæˆ‘éœ€è¦</option><option value="no">è¬è¬ï¼Œä¸éœ€è¦</option></select>
              <div id="guest-v-group" style="display:none;">
                <label for="guest-v">äººæ•¸ï¼š</label>
                <select id="guest-v" name="guest-v"></select>
              </div>
              <button type="submit">é€å‡ºå›è¦†</button>
            </form>
          </div>
        </section>

        <!-- åœ°åœ– -->
        <section>
          <button class="toggle-button" onclick="toggleSection('map-content')">ğŸ—ºï¸ å©šå®´åœ°åœ–</button>
          <div id="map-content" class="toggle-content">
            <div class="map-container">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14561.036401887412!2d120.64254316053778!3d24.16264433788154!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34693d8c2f21172f%3A0xc5fa8741cb3c07d7!2z5Y-w5Lit5p6X55qH5a6u!5e0!3m2!1szh-TW!2stw!4v1746501511946!5m2!1szh-TW!2stw" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
          </div>
        </section>

        <div class="note">
          å»ºè­°æ­ä¹˜é«˜éµæ–¼çƒæ—¥ç«™æ­é«˜éµæ¥é§è»Šï¼Œåœ¨110å¸‚æ”¿è·¯å£ä¸‹è»Šï¼Œéœ€æ³¨æ„æ—çš‡å®®æ˜¯2æ£Ÿé–“ç”±ç»ç’ƒå¸·å¹•æŸ±ä¸­é–“ä¸€æ®µç™½å¸ƒæ¢å…¥å£é€²å ´ï¼Œè»Šå¤šã€åœè»Šä½æœ‰é™ï¼Œå»ºè­°å…±ä¹˜ï¼
        </div>
      </div>
      <div class="C"></div>
    </div>

    <footer><p>Â© 2025 å¼µ&é»ƒ æ•¬é‚€</p></footer>
  </div>

  <script>
  //firebaseConfig
  const firebaseConfig = {
    apiKey: "AIzaSyCRKeXJg7ZFyoy2N3RoVgMFnaaHQ1y5WWE",
    authDomain: "wedding-3e426.firebaseapp.com",
    projectId: "wedding-3e426",
    storageBucket: "wedding-3e426.firebasestorage.app",
    messagingSenderId: "531046039955",
    appId: "1:531046039955:web:ac629474956529c160e866"
  };

  // åˆå§‹åŒ– Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  
    // Toggle æŠ˜ç–Šå€å¡Š
    function toggleSection(id) {
      const el = document.getElementById(id);
      el.style.display = (el.style.display === "none" || el.style.display === "") ? "block" : "none";
    }
	
	function populateOptions(id) {
  const select = document.getElementById(id);
  for (let i = 1; i <= 10; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = `${i} ä½`;
    select.appendChild(option);
  }
}
populateOptions("guest-count");
populateOptions("guest-v");

    document.addEventListener('DOMContentLoaded', () => {
      const attendance = document.getElementById('attendance');
      const guestCountGroup = document.getElementById('guest-count-group');
      attendance.addEventListener('change', () => guestCountGroup.style.display = attendance.value === "yes" ? "block" : "none");

      const vegetarian = document.getElementById('vegetarian');
      const guestVGroup = document.getElementById('guest-v-group');
      vegetarian.addEventListener('change', () => guestVGroup.style.display = vegetarian.value === "yes" ? "block" : "none");

// â­ï¸ è¡¨å–®æäº¤äº‹ä»¶
      document.getElementById('rsvp-form').addEventListener('submit', function(e) {
        e.preventDefault();
		const name = document.getElementById('name').value;
      const relation = this.relation.value;
      const attendance = this.attendance.value;
      const guestCount = document.getElementById('guest-count').value || "0";
      const vegetarian = this.vegetarian.value;
      const guestV = document.getElementById('guest-v').value || "0";

      db.collection("rsvps").add({
        name,
        relation,
        attendance,
        guestCount,
        vegetarian,
        guestV,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        alert('æ„Ÿè¬æ‚¨çš„å›è¦†ï¼æˆ‘å€‘æœŸå¾…èˆ‡æ‚¨å…±åº¦ç¾å¥½æ™‚å…‰ã€‚');
        this.reset();
        guestCountGroup.style.display = 'none';
        guestVGroup.style.display = 'none';
		}).catch((error) => {
        alert("ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ï¼");
        console.error("Firestore éŒ¯èª¤ï¼š", error);
		if (attendance === "yes" && guestCount === "0") {
  alert("è«‹é¸æ“‡å‡ºå¸­äººæ•¸");
  return;
}
      });
	  // é è¨­å±•é–‹ å›å‡½è¡¨å–® èˆ‡ åœ°åœ–å€å¡Š
  document.getElementById('rsvp-content').style.display = 'block';
  document.getElementById('map-content').style.display = 'block';
    });

    // æ„›å¿ƒç‰¹æ•ˆ
    function createHeart() {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDuration = 3 + Math.random() * 2 + "s";
      document.getElementById("hearts").appendChild(heart);
      setTimeout(() => heart.remove(), 5000);
    }
    setInterval(createHeart, 300);

    // ä¿¡å°å‹•ç•«èˆ‡éŸ³æ¨‚è§¸ç™¼
    const envelope = document.getElementById('envelope');
    const intro = document.getElementById('intro');
    const main = document.getElementById('main');
    const bgm = document.getElementById('bgm');
    envelope.addEventListener('click', () => {
      envelope.classList.add('open');
      setTimeout(() => {
        intro.style.opacity = 0;
        setTimeout(() => {
          intro.style.display = 'none';
          main.style.display = 'block';
          main.style.animation = 'fadeIn 1.5s ease forwards';
          // å•Ÿå‹•éŸ³æ¨‚
          bgm.volume = 0.2;
          bgm.muted = false;
          bgm.play().catch(e => console.warn("éŸ³æ¨‚æ’­æ”¾å¤±æ•—", e));
        }, 1000);
      }, 1500);
    });
	});
	;
  </script>

</body>
</html>
