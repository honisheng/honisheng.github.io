<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta http-equiv="refresh" content="5">
<title>貪吃蛇</title>
<style>
  :root{--bg:#0f172a;--panel:#111827;--accent:#22d3ee;--text:#e5e7eb}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial; background:var(--bg); color:var(--text); text-align:center}
  h2{margin:12px 0}
  #scoreBar{margin:6px 0 0 0; font-weight:600}
  canvas{
    background:#0b1020;
    border:3px solid var(--accent);
    border-radius:10px;
    display:block;
    margin:10px auto;
    width:90vw;       /* RWD 寬度 */
    max-width:400px;  /* 最大 400px */
    height:auto;      /* 自動保持比例 */
    touch-action:none; /* 禁止手勢滾動 */
  }
  #startScreen{
    position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    background: radial-gradient(1200px 600px at 50% -20%, #1f2937 0%, #0b1020 40%, #050814 100%);
    gap:16px; z-index:10; padding:20px;
  }
  #title{font-size:clamp(28px,5vw,44px); letter-spacing:1px}
  #startBtn{
    padding:14px 28px; border:none; border-radius:12px; font-size:18px; cursor:pointer; background:var(--accent); color:#06121d; font-weight:700;
    box-shadow:0 10px 30px rgba(34,211,238,.35);
  }
  #leaderboard{
    width:min(480px,90vw); background:rgba(17,24,39,.6); border:1px solid rgba(255,255,255,.08);
    border-radius:16px; padding:12px 16px; text-align:left; backdrop-filter: blur(6px);
  }
  #leaderboard h3{margin:4px 0 8px 0; text-align:center}
  #scoreList{margin:0; padding:0 16px}
  #hint{opacity:.8; font-size:14px}
</style>
</head>
<body>

<div id="startScreen">
  <div id="title">🐍 貪吃蛇</div>
  <div id="leaderboard">
    <h3>🏆 排行榜（前 10 名）</h3>
    <ol id="scoreList"></ol>
  </div>
</div>


<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCRKeXJg7ZFyoy2N3RoVgMFnaaHQ1y5WWE",
    authDomain: "wedding-3e426.firebaseapp.com",
    projectId: "wedding-3e426",
    storageBucket: "wedding-3e426.firebasestorage.app",
    messagingSenderId: "531046039955",
    appId: "1:531046039955:web:ac629474956529c160e866"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();



function loadLeaderboard(){
  scoreList.innerHTML='<li>載入中…</li>';
  db.collection('scores').orderBy('score','desc').limit(10).get()
    .then(snap=>{
      scoreList.innerHTML='';
      let rank=1;
      snap.forEach(doc=>{
        const d=doc.data();
        const li=document.createElement('li');
        li.textContent=`#${rank++} ${d.name||'匿名'} — ${d.score} 分`;
        scoreList.appendChild(li);
      });
      if(rank===1) scoreList.innerHTML='<li>目前沒有分數，成為第一個上榜的人吧！</li>';
    }).catch(()=>{scoreList.innerHTML='<li>排行榜讀取失敗</li>';});
}

loadLeaderboard();

</script>
</body>
</html>
